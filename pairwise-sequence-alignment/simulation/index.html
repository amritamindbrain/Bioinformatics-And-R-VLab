<html>
    <head>

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    </head>
    <title>
        Vlab experiment Seq Alignment
    </title>

    <script src="./bioseq-js-master/dist/bioseq.js"></script>

    <div class="card-header" style="max-width: 70rem; background: rgb(241, 239, 239);">
        <div class="row">

            <div class="col-1" style="left: 10px; text-align: center;">
                <img src="./images/Amritalogo.png" style="width:300px;height:90px;"/>
            </div>

            <div class="col-2" style="border-right: thick solid #d8d8d8ee; margin-left: 80px;"></div>

            <div class="col-6" style="margin-left: 40px;">
                <!--h2><b>Simulator</b></h1-->
                </br>
                <h5 class="card-subtitle mb-2 text-muted"><b><i>Pairwise sequence alignment of protein or DNA sequences</i></b></h2>
            </div>

        </div>

    </div>
        
    <div class="card-header" style="max-width: 70rem; background: rgb(253, 253, 253);">
        <form style="padding: 150px;">

            <div class="form-group">
                    
                <label for="seqinput1">Sequence 1</label></br>
                <textarea id="seqinput1" name="textareainput" rows="5" cols="70" placeholder="enter you sequence here..." ></textarea>
                
                </br>
                </br>
                
                <label for="seqinput2">Sequence 2</label></br>
                <textarea id="seqinput2" name="textareainput" rows="5" cols="70" placeholder="enter you sequence here..." ></textarea>
                
                </br>
                </br>

                <button class="btn btn-success" id="csvload" onclick="AlignSeq()" type="button" style="width: 108px">Align Seq</button>
                <a href="./sequence.fasta" download="samplefile.fasta" > <button class="btn btn-light" type="button">Sample File </button> </a>
                
                <br>
                <br>
                
                <output id="seqresult1"></br>
                    
                </output>

            </div>
        </form>
    </div>

        <script>

        

            //reference : https://cdcgov.github.io/bioseq-js/

            //finding sequence alignment function with bioseq.js package

            function AlignSeq() {

                var target = document.getElementById("seqinput1").value.toUpperCase();
                var query = document.getElementById("seqinput2").value.toUpperCase();

                var rst = bioseq.align(target, query);

                var fmt = bioseq.cigar2gaps(target, query, rst.position, rst.CIGAR);
                document.getElementById('seqresult1').innerHTML = "Sequence alignment: " + "<br/><br/>" + fmt[0] + "<br/><br/>" + fmt[1];
//                 document.getElementById('seqresult1').innerHTML = "Alignment Score: " + rst.score 
            }

        </script>

    </body>
</html>
